{% extends base_main_content_template %}
{% load static %}

{% block main_content %}
<div class="main-content">
  <h3>Django Google API Course - Routing</h3>
  <div id="map" style="height: 400px; width: 100%;"></div>
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
  var google_api_key = "{{ google_api_key|safe }}";
</script>

<script src="https://maps.googleapis.com/maps/api/js?key={{ google_api_key }}&callback=initMap&libraries=&v=weekly" async defer></script>

<script>
  let map;

  async function initMap() {
    const { Map, Marker } = await google.maps.importLibrary("maps");

    const myLatLng = {
      lat: parseFloat("{{ point.lat }}"),
      lng: parseFloat("{{ point.lon }}")
    };

    map = new Map(document.getElementById("map"), {
      center: myLatLng,
      zoom: 8,
    });

    // Add a marker at the specified location
    new Marker({
      position: myLatLng,
      map,
      title: 'Hello World!',
    });
  }

  initMap();
</script>
{% endblock %}

